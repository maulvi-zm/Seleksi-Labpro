<% if (data.recommendations.length > 0) { %>
<h1 class="text-2xl font-bold mb-4 text-white">Recommended For You</h1>
<sl-carousel navigation loop slides-per-page="3" slides-per-move="1" class="w-full mb-8">
  <% data.recommendations.forEach(film => { %>
  <sl-carousel-item>
    <a href="/films/<%= film.id %>">
      <figure class="aspect-[4/3] bg-black rounded-xl">
        <img loading="lazy" src="<%= film.cover_image_url %>" alt="<%= film.title %>" class="aspect-[4/3] object-cover rounded-xl">
      </figure>
    </a>
  </sl-carousel-item>
  <% }); %>
</sl-carousel>
<% } %>

<script>
  const carousel = document.querySelector('sl-carousel');

  function updateSlidesPerPage() {
    const slidesPerPage = window.innerWidth < 768 ? 1 : 3;
    carousel.slidesPerPage = slidesPerPage;
  }

  window.addEventListener('resize', updateSlidesPerPage);

  updateSlidesPerPage();
</script>